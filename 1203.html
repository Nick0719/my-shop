<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„è³¼ç‰©å•†åŸ - å®˜æ–¹é¦–é </title>
    <style>
        /* --- 1. åŸºç¤ä½ˆå±€èˆ‡å°è¦½ --- */
        body { margin: 0; padding: 0; font-family: "Microsoft JhengHei", Arial, sans-serif; background-color: #f4f4f4; display: flex; justify-content: center; }
        .main-container { width: 95%; max-width: 1800px; padding: 20px 0; }

        /* é ‚éƒ¨å°è¦½åˆ— (æ¨™ç±¤èˆ‡åˆ†é¡ä¸¦æ’) */
        .top-nav {
            display: flex;
            align-items: center;
            gap: 40px;
            margin-bottom: 30px;
            padding: 10px 0;
        }
        .header-tag { 
            font-size: 30px; font-weight: bold; width: 60px; height: 60px; 
            border: 3px solid #333; border-radius: 50%; 
            display: flex; justify-content: center; align-items: center; 
            background: white; flex-shrink: 0;
        }
        .category-nav {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .category-nav a {
            text-decoration: none;
            color: #333;
            background-color: white;
            padding: 10px 25px;
            border: 1.5px solid #333;
            border-radius: 30px;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .category-nav a:hover {
            background-color: #333;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* --- 2. è¼ªæ’­åœ–å€å¡Š --- */
        .carousel-wrapper { width: 100%; margin-bottom: 50px; }
        .carousel-panel { width: 100%; height: 450px; background-color: white; border: 1px solid #ddd; overflow: hidden; position: relative; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .slides-container { display: flex; width: 300%; height: 100%; transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
        .slide { flex-shrink: 0; width: 33.333%; height: 100%; display: flex; justify-content: center; align-items: center; font-size: 48px; font-weight: bold; color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }

        /* --- 3. æ¨è–¦å•†å“ç¶²æ ¼ (5æ¬„) --- */
        .section-title { font-size: 28px; margin-bottom: 25px; font-weight: bold; border-left: 8px solid #007bff; padding-left: 15px; }
        .product-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 25px; width: 100%; margin-bottom: 60px; }
        .product-card { border: 1px solid #eee; background-color: white; transition: 0.3s; border-radius: 8px; overflow: hidden; text-align: center; cursor: pointer; }
        .product-card:hover { transform: translateY(-8px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        
        /* --- ã€æ–°å¢ã€‘å•†å“åœ–ç‰‡å®¹å™¨æ¨£å¼ --- */
        .card-img-container { height: 220px; background-color: #f9f9f9; overflow: hidden; }
        .card-img-container img { width: 100%; height: 100%; object-fit: cover; }
        
        .card-info { padding: 18px; }
        .card-name { font-size: 18px; margin: 8px 0; color: #333; font-weight: bold; height: 44px; overflow: hidden; }
        .card-price { color: #d9534f; font-weight: bold; font-size: 22px; }

        /* --- 4. å´é‚Šè³¼ç‰©è»Šé¢æ¿ --- */
        .sidebar { position: fixed; top: 0; right: -320px; width: 320px; height: 100%; background: #222; color: #eee; padding: 25px; transition: 0.4s ease; z-index: 2000; box-shadow: -5px 0 20px rgba(0,0,0,0.5); box-sizing: border-box; }
        .sidebar.active { right: 0; }
        .toggle-btn { position: fixed; top: 50%; right: 0; transform: translateY(-50%); z-index: 2001; padding: 15px 20px; background: #007bff; color: white; border: none; cursor: pointer; border-radius: 10px 0 0 10px; font-size: 24px; }
        .sidebar-header { font-size: 22px; font-weight: bold; border-bottom: 1px solid #444; padding-bottom: 15px; margin-bottom: 20px; display: flex; justify-content: space-between; }
        
        /* --- ã€æ–°å¢ã€‘è³¼ç‰©è»Šå…§å•†å“å–®åˆ—æ¨£å¼ --- */
        .sidebar-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; font-size: 14px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        
        .sidebar-total { font-size: 24px; font-weight: bold; margin-top: 25px; padding-top: 15px; border-top: 2px solid #444; color: #fff; display: flex; justify-content: space-between; }
        .checkout-link { display: block; width: 100%; padding: 15px; background: #28a745; color: white; text-align: center; text-decoration: none; border-radius: 6px; font-weight: bold; margin-top: 25px; box-sizing: border-box; }

        /* --- 5. é è…³å°è¦½åˆ— --- */
        .site-footer { background-color: #222; color: #ccc; padding: 60px 0 30px; width: 100%; margin-top: 40px; }
        .footer-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; gap: 40px; padding: 0 20px; }
        .footer-sec h4 { color: #fff; margin-bottom: 20px; font-size: 18px; border-bottom: 1px solid #444; padding-bottom: 10px; }
        .footer-links a { color: #aaa; text-decoration: none; margin-bottom: 12px; display: block; transition: 0.3s; }
        .footer-links a:hover { color: #fff; transform: translateX(5px); }
        .footer-bottom { text-align: center; margin-top: 50px; padding-top: 20px; border-top: 1px solid #333; font-size: 14px; color: #666; }
        /* --- å´é‚Šæ¬„å¤–æ›æ¨£å¼ --- */
.sidebar { position: fixed; top: 0; right: -320px; width: 320px; height: 100%; background: #222; color: #eee; padding: 25px; transition: 0.4s ease; z-index: 2000; box-shadow: -5px 0 20px rgba(0,0,0,0.5); box-sizing: border-box; }
.sidebar.active { right: 0; }
.toggle-btn { position: fixed; top: 50%; right: 0; transform: translateY(-50%); z-index: 2001; padding: 15px 20px; background: #007bff; color: white; border: none; cursor: pointer; border-radius: 10px 0 0 10px; font-size: 24px; }
.sidebar-header { font-size: 22px; font-weight: bold; border-bottom: 1px solid #444; padding-bottom: 15px; margin-bottom: 20px; display: flex; justify-content: space-between; }
.sidebar-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; font-size: 14px; border-bottom: 1px solid #333; padding-bottom: 10px; }
.sidebar-total { font-size: 24px; font-weight: bold; margin-top: 25px; padding-top: 15px; border-top: 2px solid #444; color: #fff; display: flex; justify-content: space-between; }
.checkout-link { display: block; width: 100%; padding: 15px; background: #28a745; color: white; text-align: center; text-decoration: none; border-radius: 6px; font-weight: bold; margin-top: 25px; box-sizing: border-box; }

/* è®“åŸæœ¬çš„ card-img å¯ä»¥é¡¯ç¤ºåœ–ç‰‡ */
.card-img { overflow: hidden; }
.card-img img { width: 100%; height: 100%; object-fit: cover; }
    </style>
</head>
<body>

    <div class="main-container">
        <header class="top-nav">
            <div class="header-tag">GO</div>
            <nav class="category-nav">
                <a href="category.html?name=é›»å­ç”¢å“" target="_blank">é›»å­ç”¢å“</a>
                <a href="category.html?name=å±…å®¶ç”Ÿæ´»" target="_blank">å±…å®¶ç”Ÿæ´»</a>
                <a href="category.html?name=æœé£¾é…ä»¶" target="_blank">æœé£¾é…ä»¶</a>
                <a href="category.html?name=ç¾é£Ÿé£²å“" target="_blank">ç¾é£Ÿé£²å“</a>
            </nav>
        </header>

        <section class="carousel-wrapper">
            <div class="carousel-panel">
                <div class="slides-container" id="slidesContainer">
                    <div class="slide" style="background: linear-gradient(45deg, #FF512F, #DD2476);">å¹´çµ‚å¤§ä¿ƒéŠ· - å…¨é¤¨5æŠ˜èµ·</div>
                    <div class="slide" style="background: linear-gradient(45deg, #2193b0, #6dd5ed);">æ˜¥å­£æ–°å“ä¸Šå¸‚ - æ¶å…ˆé«”é©—</div>
                    <div class="slide" style="background: linear-gradient(45deg, #11998e, #38ef7d);">ç¶ è‰²ç”Ÿæ´»ç¯€ - ç’°ä¿å•†å“ç‰¹é¸</div>
                </div>
            </div>
        </section>

        <section>
            <div class="section-title">æ¯æ—¥æ¨è–¦å•†å“</div>
            <div class="product-grid" id="recommendationGrid"></div>
        </section>

        <footer class="site-footer">
            <div class="footer-container">
                <div class="footer-sec">
                    <h4>é—œæ–¼æˆ‘å€‘</h4>
                    <p>è‡´åŠ›æ–¼æ‰“é€ æœ€ä¾¿æ·çš„ç·šä¸Šè³¼ç‰©ç’°å¢ƒï¼Œæä¾›åš´é¸å•†å“èˆ‡é€æ˜åƒ¹æ ¼ï¼Œè®“æ¯ä½å®¢æˆ¶éƒ½èƒ½è²·åˆ°å¿ƒé ­å¥½ã€‚</p>
                </div>
                <div class="footer-sec">
                    <h4>å¿«é€Ÿé€£çµ</h4>
                    <div class="footer-links">
                        <a href="1203.html">å•†åŸé¦–é </a>
                        <a href="category.html?name=é›»å­ç”¢å“">é›»å­ç”¢å“å°ˆå€</a>
                        <a href="category.html?name=å±…å®¶ç”Ÿæ´»">å±…å®¶ç”Ÿæ´»å°ˆå€</a>
                        <a href="#">è¯çµ¡æˆ‘å€‘</a>
                    </div>
                </div>
                <div class="footer-sec">
                    <h4>å®¢æœè¯çµ¡</h4>
                    <p>æœå‹™æ™‚é–“ï¼šé€±ä¸€è‡³é€±äº” 09:00 - 18:00</p>
                    <p>å®¢æœä¿¡ç®±ï¼šshop@service.com</p>
                </div>
            </div>
            <div class="footer-bottom">&copy; 2025 æˆ‘çš„è³¼ç‰©å•†åŸ ç‰ˆæ¬Šæ‰€æœ‰.</div>
        </footer>
    </div>

    <button class="toggle-btn" onclick="toggleSidebar()">ğŸ›’</button>
    <aside class="sidebar" id="mainSidebar">
        <div class="sidebar-header">
            <span>æˆ‘çš„è³¼ç‰©æ¸…å–®</span>
            <span onclick="toggleSidebar()" style="cursor:pointer;">&times;</span>
        </div>
        <div id="cartContent"></div>
        <div class="sidebar-total">
            <span>ç¸½è¨ˆ:</span>
            <span id="cartTotalText">$ 0</span>
        </div>
        <a href="cart.html" target="_blank" class="checkout-link">å‰å¾€çµå¸³åˆ†é </a>
    </aside>

    <script src="products.js"></script>

    <script>
        function toggleSidebar() { document.getElementById('mainSidebar').classList.toggle('active'); }

        // éš¨æ©Ÿæ¨è–¦ (æ–°å¢ï¼šè®€å–å•†å“åœ–ç‰‡)
        function renderRecommendations() {
            const grid = document.getElementById('recommendationGrid');
            if (typeof allProducts === 'undefined') return;
            const shuffled = [...allProducts].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 10);
            grid.innerHTML = '';
            selected.forEach(p => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.onclick = () => window.open(`product.html?id=${p.id}`, '_blank');
                card.innerHTML = `
                    <div class="card-img-container">
                        <img src="${p.image}" alt="${p.name}">
                    </div>
                    <div class="card-info">
                        <div class="card-name">${p.name}</div>
                        <div class="card-price">$ ${p.price.toLocaleString()}</div>
                    </div>`;
                grid.appendChild(card);
            });
        }

        // æ›´æ–°è³¼ç‰©è»Šé¡¯ç¤º (æ–°å¢ï¼šæ›´å¥½çš„æ¸…å–®æ ¼å¼)
        function refreshSidebarCart() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const container = document.getElementById('cartContent');
            const totalText = document.getElementById('cartTotalText');
            let total = 0, html = '';
            
            cart.forEach(item => {
                const sub = item.price * item.qty;
                total += sub;
                html += `
                    <div class="sidebar-item">
                        <div>
                            <div style="font-weight:bold; color:#fff;">${item.name}</div>
                            <div style="color:#aaa; font-size:12px;">$ ${item.price.toLocaleString()} x ${item.qty}</div>
                        </div>
                        <div style="color:#28a745; font-weight:bold;">$ ${sub.toLocaleString()}</div>
                    </div>`;
            });
            container.innerHTML = html || '<p style="text-align:center; color:#888;">è³¼ç‰©è»Šæ˜¯ç©ºçš„</p>';
            totalText.textContent = `$ ${total.toLocaleString()}`;
        }

        // ã€æ–°å¢ã€‘ç›£è½è·¨é é¢ LocalStorage è®Šå‹•
        window.addEventListener('storage', (e) => {
            if (e.key === 'cart') {
                refreshSidebarCart();
            }
        });

        // è¼ªæ’­è‡ªå‹•æ’­æ”¾
        let currentSlide = 0;
        setInterval(() => {
            currentSlide = (currentSlide + 1) % 3;
            const container = document.getElementById('slidesContainer');
            if(container) container.style.transform = `translateX(-${currentSlide * 33.333}%)`;
        }, 5000);

        window.onload = () => { 
            renderRecommendations(); 
            refreshSidebarCart(); 
        };
        // 1. åˆ‡æ›å´é‚Šæ¬„
function toggleSidebar() { 
    document.getElementById('mainSidebar').classList.toggle('active'); 
}

// 2. æ›´æ–°è³¼ç‰©è»Šé¡¯ç¤º
function refreshSidebarCart() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const container = document.getElementById('cartContent');
    const totalText = document.getElementById('cartTotalText');
    let total = 0, html = '';
    
    cart.forEach(item => {
        const sub = item.price * item.qty;
        total += sub;
        html += `
            <div class="sidebar-item">
                <div>
                    <div style="font-weight:bold; color:#fff;">${item.name}</div>
                    <div style="color:#aaa; font-size:12px;">$ ${item.price.toLocaleString()} x ${item.qty}</div>
                </div>
                <div style="color:#28a745; font-weight:bold;">$ ${sub.toLocaleString()}</div>
            </div>`;
    });
    container.innerHTML = html || '<p style="text-align:center; color:#888;">è³¼ç‰©è»Šæ˜¯ç©ºçš„</p>';
    totalText.textContent = `$ ${total.toLocaleString()}`;
}

// 3. è·¨é é¢åŒæ­¥ç›£è½
window.addEventListener('storage', (e) => {
    if (e.key === 'cart') refreshSidebarCart();
});

// 4. ä¿®æ”¹å¦³åŸæœ¬çš„ renderRecommendations è®“å®ƒé¡¯ç¤ºåœ–ç‰‡
// è«‹æ‰¾åˆ°å¦³åŸæœ¬çš„ renderRecommendations å‡½æ•¸ï¼Œä¸¦å°‡ card.innerHTML æ”¹æˆï¼š
/*
card.innerHTML = `
    <div class="card-img"><img src="${p.image}" style="width:100%; height:100%; object-fit:cover;"></div>
    <div class="card-info">
        <div class="card-name">${p.name}</div>
        <div class="card-price">$ ${p.price.toLocaleString()}</div>
    </div>`;
*/

// æœ€å¾Œåœ¨ window.onload è£¡é¢å¤šåŠ ä¸€å€‹ refreshSidebarCart();
const originalOnload = window.onload;
window.onload = () => {
    if (originalOnload) originalOnload();
    refreshSidebarCart();
};
    </script>
    <button class="toggle-btn" onclick="toggleSidebar()">ğŸ›’</button>
<aside class="sidebar" id="mainSidebar">
    <div class="sidebar-header">
        <span>æˆ‘çš„è³¼ç‰©æ¸…å–®</span>
        <span onclick="toggleSidebar()" style="cursor:pointer;">&times;</span>
    </div>
    <div id="cartContent"></div>
    <div class="sidebar-total">
        <span>ç¸½è¨ˆ:</span>
        <span id="cartTotalText">$ 0</span>
    </div>
    <a href="cart.html" target="_blank" class="checkout-link">å‰å¾€çµå¸³åˆ†é </a>
</aside>
</body>
</html>